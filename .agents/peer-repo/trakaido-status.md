# Trakaido - Current Status

## Repository Overview

**Trakaido** is a comprehensive multi-language learning application ecosystem supporting nine target languages (Lithuanian, Chinese, French, Spanish, German, Italian, Dutch, Portuguese, Swedish) with multiple native language interfaces. The project consists of three platform-specific implementations sharing common language data and design principles.

## Platform Implementations

### React/Web Application

The web version is built with **React 19, TypeScript, and Vite**, featuring:

- **Modern Architecture**: TailwindCSS styling (migrating from legacy CSS), Manager pattern for state management
- **Build System**: Vite-based build producing a single HTML file with all assets inlined for offline capability
- **Dual Storage**: IndexedDB/localStorage for demo mode, remote API integration for authenticated users
- **Testing**: Jest + React Testing Library with comprehensive test coverage
- **Type Safety**: Full TypeScript implementation with strict type checking (`npm run typecheck`)

The React app supports both **demo mode** (no account required, local storage only) and **authenticated mode** (cloud sync via Atacama Stats API).

### Swift/iOS/macOS Application

Native Apple platform implementation using **SwiftUI** with:

- **Architecture**: MVVM pattern with Core Data persistence
- **Storage**: Core Data + UserDefaults + Keychain for secure credential storage
- **Sync**: SyncManager for cloud synchronization with backend
- **Audio**: AudioPrecacheManager for efficient audio caching
- **Platform Support**: Universal app for iPhone, iPad, and macOS

The Swift app provides a native experience optimized for Apple devices with offline-first architecture and background sync capabilities.

### Kotlin/Android Application

Android implementation currently in development. The Kotlin app shares UI string translations with React through a generated XML resource system.

## Language Support Architecture

### Target Languages (What Users Learn)

**Core Languages** (Web + Mobile):
- Lithuanian - Full feature set with grammar interstitials, conjugation/declension tables
- Chinese - Vocabulary and sentences with grammar lessons
- French - Vocabulary and sentences with grammar lessons
- Spanish - Vocabulary and sentences with grammar lessons

**Experimental Languages** (Web Only):
- German, Italian, Dutch, Portuguese, Swedish - Vocabulary and sentence learning

### Source Languages (User Interface)

The **source language** determines UI translation and word translation direction:
- **English** (en) - Default, fully supported
- **Kannada** (kn, ಕನ್ನಡ) - UI translations complete, Wireword files in development
- **Bengali** (bn) - Partial support
- **Ukrainian** (uk) - Partial support

UI strings are managed through a **centralized translation system** in `strings/{lang}/*.json`, which generates both TypeScript files (`react/Strings/`) and Android XML resources (`KotlinApp/.../strings.xml`). This single-source-of-truth approach ensures consistency across platforms.

## Study Modes

Trakaido offers nine distinct learning modes:

1. **Journey Mode** - Spaced repetition with automatic word selection and progression tracking
2. **Drill Mode** - Customizable practice with selected words and activity types
3. **Blitz Mode** - Timed speed-based challenges
4. **Flashcard Mode** - Traditional flashcard review
5. **Multiple Choice Mode** - Multiple choice only practice
6. **Listening Mode** - Audio comprehension focus
7. **Typing Mode** - Spelling and typing practice
8. **Vocabulary List Mode** - Browse and search word lists
9. **Grammar Modes** - Conjugation and declension practice (Lithuanian)

Words are organized by **levels** (difficulty progression) and **groups** (thematic categories like Food, Travel, Family), allowing learners to customize their study materials.

## Content Pipeline

Trakaido consumes **WireWord JSON files** generated by the Greenland linguistic database system. These files contain:

- Vocabulary entries with translations in multiple source languages
- Definitions and example sentences
- Pronunciation data (IPA phonetics)
- Audio file references
- Grammatical metadata (gender, conjugation class, declension patterns)
- Difficulty ratings and thematic groupings

The data files live in `data/{target_language}/{source_code}/` directories and are bundled into the applications during build time.

## Repository Structure

```
trakaido/
├── react/              # React/TypeScript web app (Vite root)
├── SwiftApp/           # iOS/macOS Swift app
├── KotlinApp/          # Android Kotlin app
├── strings/            # Source of truth for UI translations (JSON)
├── data/               # Language data files (WireWord exports)
├── wordlists/          # Python package for wordlist generation
├── landing/            # Flask landing page (trakaido.com)
├── tests/              # Test data and API response samples
└── scripts/            # Build and utility scripts
```

Each platform has detailed documentation in its respective CLAUDE.md file.

## Development Standards

- **React**: Always run `npm run typecheck && npm test` before commits
- **Swift**: Use `xcodebuild` with explicit SDK and no code signing for builds
- **Translations**: Edit `strings/{lang}/*.json`, run `python3 scripts/generate_strings.py`, never edit generated files
- **TypeScript Paths**: Use case-sensitive shortcuts like `@Types/Word`, `@components/`, `@modes/`
- **Commit Messages**: Include platform (React, Swift, Kotlin) if commit is platform-specific

## Integration with Ecosystem

Trakaido is tightly integrated with:

- **Greenland** - Provides all vocabulary and linguistic data through WireWord exports
- **Atacama** - Hosts the Stats API for cloud synchronization, user authentication, and progress tracking

This three-repository ecosystem enables separation of concerns: Greenland generates high-quality linguistic data, Atacama provides backend infrastructure, and Trakaido delivers polished learning experiences across multiple platforms.

## Current State

Trakaido is a production-ready language learning application actively serving users across web and iOS platforms, with Android development in progress. The multi-platform architecture enables broad accessibility while maintaining code quality and consistency through shared data formats and centralized translation management.
