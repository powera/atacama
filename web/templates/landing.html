<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atacama Message Processor</title>
    <link rel="stylesheet" href="/css/landing.css">
</head>
<body>
    <h1>Atacama Message Processor</h1>
    
    <div class="status">
        <h2>Service Status</h2>
        <p>Server is running and processing messages with custom color formatting.</p>
        <p>Database Status: {{ db_status }}</p>
    </div>

    <div class="endpoints">
        <h2>Available Endpoints</h2>
        <ul>
            <li><code>POST /process</code> - Process and store new messages</li>
            <li><code>GET /messages/{id}</code> - Retrieve processed message by ID</li>
        </ul>
    </div>

    <h2>Recent Messages</h2>
    {% if messages %}
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Subject</th>
                <th>Preview</th>
                <th>Received</th>
            </tr>
        </thead>
        <tbody>
            {% for message in messages %}
            <tr>
                <td>{{ message.id }}</td>
                <td>
                    <a href="/messages/{{ message.id }}" class="message-link">
                        {{ message.subject or '(No Subject)' }}
                    </a>
                </td>
                <td class="message-preview">{{ message.content[:100] }}...</td>
                <td class="timestamp">{{ message.created_at_formatted }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="no-messages">
        No messages processed yet
    </div>
    {% endif %}
</body>
</html>
